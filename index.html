<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Hobie iPad Lead Gen Tool</title>
        <!-- CSS -->
        <link href="css/style.css" rel="stylesheet">
        <!-- JS -->
        <script src="js/jquery.min.js"></script>
        <script src="js/jquery.validate.min.js"></script>
    </head>
    <body>
        <div class="wrapper">
            <div class="form-wrapper">
                <!-- Lead gen form -->
                <form method="post" action="#" class="lead-form">
                    <div>
                        <!-- Email field -->
                        <label>Enter Email:</label>
                        <input type="email" name="email" class="input-email rounded" required>
                    </div>
                    <div>
                        <!-- Zip code field & submit button -->
                        <label>Zip Code:</label>
                        <input type="text" name="zip" minlength="5" class="input-zip rounded" required><button class="input-submit rounded">Submit</button>
                    </div>
                    <div class="validation-messages">
                        <!-- Form Validation Messages Here -->
                    </div>
                </form>
            </div>
        </div>
        <script>
            // Validate form using jQuery plugin
            $('form.lead-form').validate({
                errorPlacement: function (error, element) {
                    error.appendTo('div.validation-messages');
                }
            });
            // Check if we can use browser based localStorage
            if (typeof(Storage) != 'undefined') {
                // Collect form submitted data on submit and write it to localStorage
                $('button.input-submit').click(function (event) {
                    // Stop form from actually submitting on button click
                    event.preventDefault();

                    // Get form's submitted email & zip field data
                    var email = $('input.input-email').val();
                    var zip = $('input.input-zip').val();

                    // Create JSON object to pass along to localStorage
                    var json_data = {'email': email, 'zip': zip};

                    // Get number of items stored in localStorage
                    var num_rows = localStorage.length + 1;

                    // Commit data to localStorage if form passes validation
                    if ($('input.input-email').hasClass('valid') && $('input.input-zip').hasClass('valid')) {
                        // Write JSON data to localStorage
                        localStorage.setItem(num_rows, JSON.stringify(json_data));

                        // Clear 
                    }
                });
            }
            // Can't use browser based localStorage? Show JS alert message.
            else {
                alert('***** Browser based localStorage is not available. Collected data will not be saved! *****');
            }
        </script>
    </body>
</html>
